<ui:composition xmlns:ui="jakarta.faces.facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="jakarta.tags.core"
                xmlns:f="jakarta.faces.core"
                template="../templates/layout.xhtml">
    <ui:define name="scripts">
        <link id="contextPathHolder" data-contextPath="#{facesContext.externalContext.requestContextPath}"/>
        <h:outputScript library="ts" name="graphics.js"/>
        <h:outputScript library="ts" name="jquery-3.7.1.min.js"/>
        <h:outputScript library="ts" name="validate-input.js"/>
    </ui:define>
    <ui:define name="main-body">
        <f:view>
        <div class="container math-page-layout">
            <h:form id="math-form" styleClass="control-side">
                <div class="control-bar">
                    <div class="btn-bar">
                        <h3 class="btn-title">
                            Тыкалки по X:
                        </h3>

                        <c:forEach var="i" begin="0" end="#{query.size - 1}" >
                            <h:outputLabel for="x_#{i}" value="#{query.labels[i]}" />
                            <h:selectBooleanCheckbox id="x_#{i}" value="#{query.checkBoxes[i]}"/>
                        </c:forEach>

                    </div>
                    <div class="text-bar">
                        <!--<label for="r">Нацарапай число:</label>
                        <input type="text" placeholder="R"
                               id="r" maxlength="6" name="r" data-range="3"/>-->

                        <h:outputLabel for="r" value="Нацарапай число:" />
                        <p:inputText id="r" maxlength="6" required="true" placeholder="R"
                                    value="#{query.r}"/>

                        <h:outputLabel for="y" value="Нацарапай число:" />
                        <p:inputText id="y" maxlength="6" required="true" placeholder="Y"
                                    value="#{query.y}"/>

                        <div class="submit-image">
                            <h:commandButton type="submit" image="../resources/assets/table_cat_colored.png"
                                        action="#{query.save()}"/>
                        </div>
                    </div>
                </div>
                <div class="recent-result">
                    <ui:include src="../templates/area-result.xhtml">
                        <ui:param name="resultTitle" value="Последний запрос:"/>
                    </ui:include>
                </div>
                <h:link styleClass="show-history-btn" outcome="history" value="Перейти к истории запросов" />
            </h:form>
            <div class="graphics-side">
                <canvas id="math-area" width="2000" height="2000">Unsupported canvas view</canvas>
            </div>
        </div>
        </f:view>
    </ui:define>
</ui:composition>